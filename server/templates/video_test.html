<!-- <!DOCTYPE html>
<html>
<head>
    <title></title>
    <script src="https://cdn.staticfile.org/jquery/3.4.0/jquery.min.js"></script>
</head>
<body>
    <video id="player" src="" width="1024" height="768" controls autoplay>
    </video>
</body>
</html> -->

<!DOCTYPE html>
<html lang="en">
 
<head>
    <title>video</title>
    <link href="https://unpkg.com/video.js/dist/video-js.css" rel="stylesheet">
    <script src="https://unpkg.com/video.js/dist/video.min.js"></script>
    <script src="https://unpkg.com/flv.js/dist/flv.min.js"></script>
    <script src="https://unpkg.com/videojs-flvjs/dist/videojs-flvjs.min.js"></script>
</head>
 
<body>
    <div>
        <video id="videojs-flvjs-player" class="video-js vjs-default-skin vjs-big-play-centered"  width="1080" height="960"> </video>
    </div>
</body>
 
</html>
<script>
    // $(function () {
    //     var path = "/resources/av54245751.mp4";
    //     $("#player").attr("src", "/courseware/video_stream/?path=" + path);
    // });
var flvUrl = "/courseware/video_stream/?path=/resources/020.flv";
var player = videojs('videojs-flvjs-player', {
    techOrder: ['html5', 'flvjs'],
    flvjs: {
        mediaDataSource: {
            isLive: false,
            cors: true,
            withCredentials: false,
        },
    },
    sources: [{
        src: flvUrl,
        type: 'video/x-flv'
    }],
    controls: true,
    preload: "none"
}, function onPlayerReady() {
    console.log('player ready')
    player.on('error', (err) => {
        console.log('first source load fail')
        player.src({
            src: flvUrl,
            type: 'video/x-flv'
        });
        player.ready(function() {
            console.log('player ready')
            player.load();
            player.play();
        });
    })
});
</script>